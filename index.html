<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>Arabic Short Stories</title>
</head>
<body>
  
  <div class="container">
    <div class="story-title">Where are my keys?</div>

    <img class="story-title-image" src="https://stories-cdn.duolingo.com/image/783305780a6dad8e0e4eb34109d948e6a5fc2c35.svg" alt="title-image" height="175px" width="175px">

    <div class="intro-text">
      <p>Learn Arabic through short stories.</p>
      <p>Click on words you don't know.</p>
    </div>

    <div id="dialog-group">

      <!-- 1. -->
      <div class="dialog-container">
        <div class="dialog-avatar">
          <img src="https://stories-cdn.duolingo.com/image/7074d00522c0be6307e3e405f503699a99d2121e.svg" alt="avatar-img" height="50px" width="50px"> 
        </div>

        <div class="dialog-box-corner-arrow"></div>

        <div class="dialog-box">
          
          <div class="popup" onclick="goodMorningPopup()">
            <u class="decoration">صباح الخير</u>
            <span class="popuptext" id="goodMorningPopup">
              Good morning
            </span>
            مها
          </div>

        </div>
      </div>

      <!-- 2. -->
      <div class="dialog-container">
        <div class="dialog-avatar">
          <img src="https://stories-cdn.duolingo.com/image/2b2b64afe0c2af19eed8ac69c36cb8803d0a090e.svg" alt="avatar-img" height="50px" width="50px"> 
        </div>

        <div class="dialog-box-corner-arrow"></div>
        
        <div class="dialog-box">

          <div class="popup" onclick="whereAreMyKeysPopup()">
            اين <u class="decoration">مفاتيحي</u> ؟
          <span class="popuptext" id="whereAreMyKeysPopup">
            My keys
          </span>
        </div>

        </div>

      </div>
      
      <!-- 3.  -->
      <div class="dialog-container">
        <div class="dialog-avatar">
          <img src="https://stories-cdn.duolingo.com/image/7074d00522c0be6307e3e405f503699a99d2121e.svg" alt="avatar-img" height="50px" width="50px"> 
        </div>

        <div class="dialog-box-corner-arrow"></div>
        
        <div class="dialog-box">

          <div class="popup" onclick="yourKeysPopup()">
            <u class="decoration">مفاتيحك؟</u> ؟
          <span class="popuptext" id="yourKeysPopup">
            Your keys
          </span>
        </div>

        </div>

      </div>

      <!-- 4. -->
      <div class="dialog-container">
        <div class="dialog-avatar">
          <img src="https://stories-cdn.duolingo.com/image/2b2b64afe0c2af19eed8ac69c36cb8803d0a090e.svg" alt="avatar-img" height="50px" width="50px"> 
        </div>

        <div class="dialog-box-corner-arrow"></div>
        
        <div class="dialog-box">

          <div class="popup" onclick="iNeedThemForWorkPopup()">
          نعم، <u class="decoration">أحتاجهم</u> للذهاب إلى العمل

          <span class="popuptext" id="iNeedThemForWorkPopup">
            I need them
          </span>
        </div>

        </div>

      </div>

      <!-- Question 1 -->
      <div class="question-container">
        <p class="question-text">Maha can't find her keys?</p>

        <input type="radio" id="yes-find-keys" name="find-keys-question" value="yes" onclick="findKeysQuestion()">
        <label for="yes-keys"> Yes</label><br>
        <input type="radio" id="no-find-keys" name="find-keys-question" value="no" onclick="findKeysQuestion()">
        <label for="no-keys"> No</label><br>
      </div>


      <!-- 5. -->
      <div class="dialog-container">
        <div class="dialog-avatar">
          <img src="https://stories-cdn.duolingo.com/image/2b2b64afe0c2af19eed8ac69c36cb8803d0a090e.svg" alt="avatar-img" height="50px" width="50px"> 
        </div>

        <div class="dialog-box-corner-arrow"></div>
        
        <div class="dialog-box">

          <div class="popup" onclick="whereAreMyKeysPopup()">
            أحتاج ، أحتاج مفاتيح سيارتي!
          <span class="popuptext" id="whereAreMyKeysPopup">
            I need, I need my car keys!
          </span>
        </div>

        </div>

      </div>


    </div>

    <div class="bottom-area">
      <div id="feedback-text"></div>
      <button class="continue-button" id="start" onclick="startDialogue()">
        Start
      </button>
  
      <button class="continue-button" id="continue" onclick="nextItem()">
        Continue
      </button>

    </div>

  </div>


  <script>
    const arrayOfDialogues = document.getElementById("dialog-group").children;
    const dialogContainer = document.getElementById("dialog-group")
    const continueButton = document.getElementById("continue")
    let dialogCounter = 0;

    // Initialize divs on load
    function initialize() {
      dialogContainer.style.display = "none"

      let continueButton = document.getElementById("continue");
      continueButton.style.display = "none"
    }

    // Start dialogue
    function startDialogue() {
      let startButton = document.getElementById("start");
      startButton.style.display = "none"
      let continueButton = document.getElementById("continue");
      
      continueButton.style.display = "block"
      dialogContainer.style.display = "block"

      for (let i = 1; i < arrayOfDialogues.length; i++) {
        arrayOfDialogues[i].style.visibility = "hidden";
      }
    }

    // Move to the next dialog or question
    function nextItem() {
      if (dialogCounter <= arrayOfDialogues.length - 2) {
        dialogCounter += 1;
        arrayOfDialogues[dialogCounter].style.visibility = "visible"
      } else {
        continueButton.innerHTML = "Next Story!"
        continueButton.style.backgroundColor = "red"
      }
      if (dialogCounter == 4) {
        continueButton.disabled = true
      }
      console.log(dialogCounter)
    }

    // Functions related to questions.
    function awesomeFeedback() {
      let feedback = document.getElementById("feedback-text")

      feedback.innerHTML = "AWESOME!"
      continueButton.disabled = false
      setTimeout(() => {
        feedback.innerHTML = ""
      },2000)
    }

    function ouchFeedback() {
      let feedback = document.getElementById("feedback-text")
      let continueButton = document.getElementById("continue")

      feedback.innerHTML = "OUCH try again!"
      continueButton.disabled = true
      setTimeout(() => {
        feedback.innerHTML = ""
      },2000)
    }

    function findKeysQuestion() {
      if (document.getElementById("yes-find-keys").checked) {
        awesomeFeedback();
      } else if (document.getElementById("no-find-keys").checked) {
        ouchFeedback();
      }
    }

    // Pop up translations (Right now every translation requires its own function. Luckily they are easy to write.)
    function goodMorningPopup() {
      let popup = document.getElementById("goodMorningPopup");
      popup.classList.toggle("show");
    }

    function whereAreMyKeysPopup() {
      let popup = document.getElementById("whereAreMyKeysPopup");
      popup.classList.toggle("show");
    }

    function yourKeysPopup() {
      let popup = document.getElementById("yourKeysPopup");
      popup.classList.toggle("show");
    }

    function iNeedThemForWorkPopup() {
      let popup = document.getElementById("iNeedThemForWorkPopup");
      popup.classList.toggle("show");
    }

    // Call initialize
    initialize();
  </script>
  
</body>
</html>